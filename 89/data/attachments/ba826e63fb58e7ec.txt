const jsonData = pm.response.json();

pm.test("Status code is 200", function () {
    pm.response.to.have.status(200);
});


pm.test("Data array is returned", function () {
    pm.expect(jsonData.data).to.have.property("data").that.is.an("array");
});

pm.test("Each category has required fields", function () {
    const jsonData = pm.response.json();
    jsonData.data.data.forEach(cat => {
        pm.expect(cat).to.have.property("id");
        pm.expect(cat).to.have.property("name");
        pm.expect(cat).to.have.property("description");
        pm.expect(cat).to.have.property("icon_url");
        pm.expect(cat).to.have.property("status");
        pm.expect(cat).to.have.property("product_group_id");
        pm.expect(cat).to.have.property("amount");
    });
});