const jsonData = pm.response.json();

pm.test("Response code is 200", function () {
    pm.response.to.have.status(200);
});

// Validate the data object structure
pm.test("Data object is valid", () => {
    const responseData = jsonData.data.data;

    pm.expect(responseData).to.exist;
    pm.expect(responseData).to.be.an('array');

    const requiredFields = [
        'id', 'reference', 'status', 'amount', 'frequency', 'bank_code', 'account_number', 'customer_id', 'currency', 'product_group_id', 'product_id', 'meta'
    ];

    responseData.forEach(item => {
        requiredFields.forEach(field => {
            pm.expect(item).to.have.property(field);
        });
    });
});

